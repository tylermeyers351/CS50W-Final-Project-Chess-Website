{% extends "chess/layout.html" %}

{% block body %}
    <div class="mainDiv">
        <br>
        <h5>Thread: {{thread.title }} </h5>
        <div class="threadLink">
            <div style="display: flex; justify-content: space-between;">
                <p style="font-size: smaller; margin: 2px;"> Category: {{ thread.category.title }} - Posted by {{ thread.created_by }}</p>
                <p style="font-size: smaller; margin: 2px; text-align: right;"> Replies: {{ thread.post_count }}</p>
            </div>
            <h6> <a href="{% url 'forum_thread' id=thread.id %}">{{ thread.title }}</a> </h6>
            <p style="margin: 6px 0px;"> {{ thread.description }} </p>
            <p style="font-size: smaller; margin: 0px;"> {{ thread.created_at }}</p>
        </div>
        
        <div id="newButton">
            <button onclick="changeDisplay()" style="margin-bottom: 10px;" type="button" class="buttonStyle btn btn-dark">New Post</button>
        </div>

        <div style="display:none;" id="newForm">
            <h5>New Post</h5>
            <form action="{% url 'new_post' id=thread.id %}" method="post">
                {% csrf_token %}
                <textarea name="content" class="form-control" placeholder="Discussion..." style="height: 160px;"></textarea>
                <input style="margin-top: 4px;" type="submit" class="btn btn-dark" value="Post"/>
            </form>
        </div>

        <div id="threadsDisplay">
        </div>

        <div>
            {% for post in posts %}
            <div class="threadLink">
                <p style="margin: 6px 0px; font-size: smaller;"><strong> {{ post.created_by }}</strong></p>
                <p style="margin: 6px 0px;"> {{ post.content }} </p>
                <p style="font-size: smaller; margin: 0px;"> {{ post.created_at }}</p>
            </div>
            {% endfor %}
        </div>

        {% comment %} <div id="pagination" class="pagination-container">
            <nav aria-label="Page navigation example">
                <ul style="display: flex; justify-content: center;"class="pagination">
                    {% if posts.has_previous %}
                        <li class="page-item"><a class="page-link" href="?page=1">&laquo First</a></li>
                        <li class="page-item"><a class="page-link" href="?page={{ posts.previous_page_number }}">Previous</a></li>
                    {% endif %}
                        <li style="color: blue;" class="page-item"><strong><a class="page-link">{{ posts.number }}</a></strong></li>
                    {% if posts.has_next %}
                        <li class="page-item"><a class="page-link" href="?page={{ posts.next_page_number }}">Next</a></li>
                        <li class="page-item"><a class="page-link" href="?page={{ posts.paginator.num_pages }}">Last &raquo;</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div> {% endcomment %}
    </div>
{% endblock %}